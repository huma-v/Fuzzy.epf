# Fuzzy.epf

Нечіткий пошук в 1С по довільним спискам елементів (без використання механізму повнотекстового пошуку).

## Навіщо?

Іноді повнотекстовий пошук не активовано на базі, так як він займає багато дискового простору. Також API цієї обробки дозволяє виконувати пошук по не об'єктним сутностям, таким як перелік об'єктів метаданих (див. основну форму обробки) чи прайс-листи постачальників.

## Механізм

Має два основних режиму - симетричний та асиметричний.
Обидва побудовані на індексах N-грам.

Симетричний режим призначений для пошуку дублікатів.\
Для оцінки схожості використовується косинусна відстань між нормалізованими векторами N-грам.

Асиметричний режим призначений для пошуку по частині рядка.\
Для оцінки схожості використовується власний алгоритм.

Підтримується пошук по декільком полям об'єкту одночасно, наприклад,
по назві та артикулу номенклатури, короткому та повному найменуванню
контрагента, імені та синоніму об'єкт метаданих.

Для прискорення пошуку використовується зовнішня компонента.

## Підтримувані платформи

Протестовано на 8.3 від 8.3.11, на Windows 7, 10, та 11\
**Не-Windows операційні системи не підтримуються**\
**Підтримуються тільки звичайні форми**

## Build

Необхідна Visual Studio 2022 та платформа 1С версії віж 8.3.11\
Також необхідний [Комплект поставки "Технології зовнішніх компонент"](https://its.1c.ru/db/metod8dev/content/3221/hdoc)
(Останнє посилання на сторінці, розпакувати каталог VNCOMPS83 в корінь репозиторія)

### Якщо VS та 1С встановлені на одному і тому же комп'ютері

1. Створити файл .env з наступним вмістом:
    ```
    1C_HOME=C:\Program Files[ (x86)]\1cv8\x.y.zz.wwww
    ```

2. З PowerShell розробника (Developer PowerShell for VS 2022) виконати
    скрипт `build.ps1`
    ```powershell
    & .\build.ps1
    ```

3. Файл обробки .epf має з'явитися в каталозі `build`

### Якщо VS та 1С на різних комп'ютерах

Простіше всього якщо цей каталог розташований в мережевому сховищі,
доступному з обох хостів.

1. На хості з VS з PowerShell розробника (Developer PowerShell for VS 2022) виконати скрипт `build.ps1` з параметром `-Stage CompOnly`
    ```powershell
    & .\build.ps -Stage CompOnly
    ```

1. На хості з 1C в цьому ж каталозі створити файл .env з наступним вмістом:
    ```
    1C_HOME=C:\Program Files[ (x86)]\1cv8\x.y.zz.wwww
    ```

2. На хості з 1C виконати скрипт `build.ps1` з
параметром `-Stage EpfOnly`
    ```powershell
    & .\build.ps -Stage EpfOnly
    ```

3. Файл обробки .epf має з'явитися в каталозі `build`